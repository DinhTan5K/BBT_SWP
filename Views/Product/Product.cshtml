@model IEnumerable<start.Models.Product>
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery

@{
    var antiforgeryToken = Antiforgery.GetAndStoreTokens(Context).RequestToken;
}

<link rel="stylesheet" href="/css/product.css" />

<div class="container">
    <aside class="filter-sidebar">
        <div class="search-bar">
            <i class="fa fa-search"></i>
            <input type="text" placeholder="Tìm trà sữa..." />
        </div>
        <button class="filter-btn active" data-category="all">Tất cả</button>
        <button class="filter-btn" data-category="1">Truyền Thống</button>
        <button class="filter-btn" data-category="2">Trái Cây</button>
        <button class="filter-btn" data-category="3">Bộ Sưu Tập</button>
        <button class="filter-btn" data-category="4">Con Cá</button>
        <button class="filter-btn" data-category="5">Con Chim</button>
    </aside>

    <div class="products-grid">
        @if (Model != null && Model.Any())
        {
            foreach (var item in Model)
            {
                <div class="product-item" data-category="@item.CategoryID" data-product-id="@item.ProductID">
                    <img src="@item.Image_Url" alt="@item.ProductName" />
                    <h3>@item.ProductName</h3>

                    <div class="size-options" data-product-id="@item.ProductID">
                        @foreach (var size in item.ProductSizes)
                        {
                            <div class="size-option" data-size-id="@size.ProductSizeID" data-price="@size.Price">
                                @size.Size
                            </div>
                        }
                    </div>

                    <p class="price">
                        Giá: <span class="selected-price">
                            @($"{item.ProductSizes.FirstOrDefault()?.Price:#,0} đ")
                        </span>
                    </p>

                    <button class="btn-add">Add to Cart</button>
                </div>
            }
        }
        else
        {
            <p>Không có sản phẩm nào!</p>
        }

        <div class="no-result">
            <i class="fa fa-search"></i>
            <p>Không tìm thấy sản phẩm nào</p>
        </div>
    </div>

    <div class="cart">
        <h2>Giỏ hàng</h2>
        <div class="cart-items" id="cart-items">
            <p>Chưa có sản phẩm nào.</p>
        </div>
        <div class="cart-total">
            Tổng : <span id="cart-total"> </span>
        </div>
        <a asp-action="Order" asp-controller="Order" class="btn-checkout">Thanh toán</a>
    </div>
</div>

<script src="/js/product.js"></script>

