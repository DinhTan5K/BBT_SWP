@model start.Models.Order
<link rel="stylesheet" href="~/css/internal.css" asp-append-version="true" />

<div class="modal-overlay">
    <div class="modal-content">
        <button class="close-modal" type="button">&times;</button>

        <h2>Chi tiết đơn hàng: @Model.OrderCode</h2>
        <hr />

        <div class="customer-info">
            <p><strong>Khách hàng:</strong> @Model.Customer?.Name</p>
            <p><strong>Địa chỉ:</strong>
                @Model.Address
                @if (!string.IsNullOrWhiteSpace(Model.DetailAddress))
                {
                    <span>, @Model.DetailAddress</span>
                }
            </p>
            <p><strong>Số điện thoại:</strong> @Model.Customer?.Phone</p>
            <p><strong>Trạng thái:</strong> @Model.Status</p>
            <p><strong>Ngày tạo:</strong> @Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</p>
        </div>

        <table class="order-table">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Size</th>
                    <th>Đơn giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.OrderDetails)
                {
                    decimal unit = item.UnitPrice;
                    decimal thanhTien = unit * item.Quantity;
                    <tr>
                        <td>@item.Product?.ProductName</td>
                        <td>@item.ProductSize?.Size</td>
                        <td>@unit.ToString("C")</td>
                        <td>@item.Quantity</td>
                        <td>@thanhTien.ToString("C")</td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="summary">
            @{
                decimal itemsTotal = Model.OrderDetails.Sum(od => od.UnitPrice * od.Quantity);
                decimal grandTotal = itemsTotal + Model.ShippingFee;
            }

            <p><strong>Phí ship:</strong> @Model.ShippingFee.ToString("C")</p>
            <p><strong>Tổng đơn:</strong> @grandTotal.ToString("C")</p>
        </div>
    </div>
</div>