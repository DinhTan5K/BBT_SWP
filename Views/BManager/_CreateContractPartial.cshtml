@model start.Models.Contract

@{
    // Đặt layout là null vì đây là partial view được load bằng AJAX
    Layout = null;
}

@*
    data-ajax="true" là thuộc tính quan trọng để báo cho jQuery Unobtrusive Validation biết
    rằng đây là một form AJAX. Điều này sẽ ngăn chặn hành vi submit mặc định (full-page postback)
    và cho phép mã JavaScript tùy chỉnh trong ViewEmp.cshtml xử lý việc gửi dữ liệu.
*@
<form id="createContractForm" data-ajax="true">
    @* Thêm EmployeeId vào form dưới dạng một trường ẩn *@
    @Html.HiddenFor(m => m.EmployeeId)

    <div class="form-group mb-3">
        <label asp-for="ContractType" class="form-label">Loại hợp đồng</label>
        <select asp-for="ContractType" class="form-select">
            <option value="">-- Chọn loại hợp đồng --</option>
            <option value="Thử việc">Thử việc</option>
            <option value="Chính thức có thời hạn">Chính thức có thời hạn</option>
            <option value="Vô thời hạn">Vô thời hạn</option>
        </select>
        <span asp-validation-for="ContractType" class="text-danger"></span>
    </div>

    <div class="row g-3 mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="StartDate" class="form-label">Ngày bắt đầu</label>
                <input asp-for="StartDate" type="date" class="form-control" />
                <span asp-validation-for="StartDate" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="EndDate" class="form-label">Ngày kết thúc</label>
                <input asp-for="EndDate" type="date" class="form-control" />
                <span asp-validation-for="EndDate" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row g-3 mb-3">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="PaymentType" class="form-label">Cách tính lương</label>
                <select asp-for="PaymentType" class="form-select" id="paymentTypeSelect">
                    <option value="Giờ">Theo giờ</option>
                    <option value="Tháng">Theo tháng</option>
                </select>
                <span asp-validation-for="PaymentType" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="BaseRate" class="form-label">Mức lương cơ bản</label>
                <div class="input-group">
                    <input asp-for="BaseRate" type="number" class="form-control" placeholder="Nhập mức lương" />
                    <span class="input-group-text" id="paymentTypeLabel">VNĐ/giờ</span>
                </div>
                <span asp-validation-for="BaseRate" class="text-danger"></span>
            </div>
        </div>
    </div>
</form>

<script>
    // Script nhỏ để cập nhật đơn vị tiền tệ khi thay đổi cách tính lương
    $('#paymentTypeSelect').on('change', function() {
        $('#paymentTypeLabel').text(this.value === 'Giờ' ? 'VNĐ/giờ' : 'VNĐ/tháng');
    }).trigger('change');
</script>