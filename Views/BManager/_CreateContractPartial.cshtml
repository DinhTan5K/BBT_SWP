@model Contract

<form id="createContractForm" asp-action="CreateContract" method="post">
    @Html.AntiForgeryToken()
    <div asp-validation-summary="All" class="text-danger mb-3"></div>
    <span data-employee-name-modal="@ViewBag.EmployeeNameForModal" class="d-none"></span>

    <input type="hidden" asp-for="EmployeeId" />

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="ContractNumber" class="form-label"></label>
            <input asp-for="ContractNumber" class="form-control" />
            <span asp-validation-for="ContractNumber" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label asp-for="ContractType" class="form-label"></label>
            <select asp-for="ContractType" class="form-select">
                <option value="">-- Select Type --</option>
                <option value="Thử việc">Thử việc</option>
                <option value="1 năm">1 năm</option>
                <option value="Vô thời hạn">Vô thời hạn</option>
            </select>
            <span asp-validation-for="ContractType" class="text-danger"></span>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="StartDate" class="form-label"></label>
            <input asp-for="StartDate" type="date" class="form-control" value="@Model.StartDate.ToString("yyyy-MM-dd")" />
            <span asp-validation-for="StartDate" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label asp-for="EndDate" class="form-label"></label>
            <input asp-for="EndDate" type="date" class="form-control" />
            <span asp-validation-for="EndDate" class="text-danger"></span>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label asp-for="PaymentType" class="form-label"></label>
            <select asp-for="PaymentType" class="form-select">
                <option value="">-- Select Type --</option>
                <option value="Giờ">Giờ</option>
                <option value="Tháng">Tháng</option>
            </select>
            <span asp-validation-for="PaymentType" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label asp-for="BaseRate" class="form-label">Base Rate (VND)</label>
            <input asp-for="BaseRate" type="number" step="1000" class="form-control" />
            <span asp-validation-for="BaseRate" class="text-danger"></span>
        </div>
    </div>
    
   
</form>

@* (Gợi ý) Thêm script tự động điền EndDate nếu bạn muốn *@
<script>
    $(document).ready(function() {
        var startDateInput = $('#createContractForm #StartDate');
        var endDateInput = $('#createContractForm #EndDate');
        var contractTypeSelect = $('#createContractForm #ContractType');

        function updateEndDate() {
            var type = contractTypeSelect.val();
            var startDateVal = startDateInput.val();

            if (!startDateVal) {
                endDateInput.val('').prop('disabled', false);
                return;
            }

            var startDate = new Date(startDateVal);
            
            if (type === "Thử việc") {
                var endDate = new Date(startDate.setMonth(startDate.getMonth() + 1));
                endDateInput.val(endDate.toISOString().split('T')[0]).prop('disabled', true);
            } 
            else if (type === "1 năm") {
                var endDate = new Date(startDate.setFullYear(startDate.getFullYear() + 1));
                endDate.setDate(endDate.getDate() - 1); 
                endDateInput.val(endDate.toISOString().split('T')[0]).prop('disabled', true);
            } 
            else if (type === "Vô thời hạn") {
                endDateInput.val('').prop('disabled', true);
            } 
            else {
                endDateInput.prop('disabled', false);
            }
        }

        contractTypeSelect.on('change', updateEndDate);
        startDateInput.on('change', updateEndDate);
        
        // Chạy lần đầu khi tải
        updateEndDate(); 
    });
</script>