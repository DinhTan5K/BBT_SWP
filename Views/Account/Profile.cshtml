@model Customer
@{
    ViewData["Title"] = "Thông tin cá nhân";

    var avatarUrl = string.IsNullOrEmpty(Model.ProfileImagePath)
        ? Url.Content("~/img/logo.png")
        : Url.Content(Model.ProfileImagePath);
}

<div class="container py-4">
    <h2>@ViewData["Title"]</h2>

    <div class="card" style="max-width:800px;">
        <div class="card-body d-flex gap-3">
            
            <div class="avatar-wrapper" style="position: relative; width:120px; height:120px;">
                <img src="@avatarUrl" alt="Avatar"
                     style="width:120px;height:120px;border-radius:50%;object-fit:cover;" />

               
                <div class="avatar-overlay"
                     style="position:absolute;top:0;left:0;width:100%;height:100%;
                            background:rgba(0,0,0,0.5);border-radius:50%;
                            display:flex;flex-direction:column;align-items:center;justify-content:center;
                            color:#fff;opacity:0;transition:opacity 0.3s;cursor:pointer;">
                    <i class="fa fa-pen"></i>
                    <span style="font-size:12px;">Edit</span>
                </div>

                
                <form asp-action="UploadAvatar" asp-controller="Account"
                      method="post" enctype="multipart/form-data" id="avatarForm">
                    <input type="file" name="avatar" id="avatarInput" accept="image/*" style="display:none;" />
                </form>
            </div>

           
            <div class="flex-fill">
                <h4>@(Model.Name ?? "Người dùng")</h4>
                <p class="mb-1"><strong>Email:</strong> @(Model.Email ?? "-")</p>
                <p class="mb-1"><strong>Số điện thoại:</strong> @(Model.Phone ?? "-")</p>
                <p class="mb-1"><strong>Ngày sinh:</strong> @(Model.BirthDate?.ToString("dd/MM/yyyy") ?? "-")</p>
                <p class="mb-1"><strong>Địa chỉ:</strong> @(Model.Address ?? "-")</p>

                <div class="mt-3">
                    <a asp-controller="Account" asp-action="Logout" class="btn btn-danger">Đăng xuất</a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        
        document.querySelectorAll('.avatar-wrapper').forEach(wrapper => {
            const overlay = wrapper.querySelector('.avatar-overlay');
            wrapper.addEventListener('mouseenter', () => overlay.style.opacity = 1);
            wrapper.addEventListener('mouseleave', () => overlay.style.opacity = 0);

            
            overlay.addEventListener('click', () => {
                wrapper.querySelector('#avatarInput').click();
            });

            
            wrapper.querySelector('#avatarInput').addEventListener('change', () => {
                wrapper.querySelector('#avatarForm').submit();
            });
        });
    </script>
}
