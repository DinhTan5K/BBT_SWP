@model start.Models.Employee
@{
    Layout = "_EmployeeLayout";               // ✅ dùng layout chung
    ViewBag.ActiveMenu = "Profile";           // để sidebar highlight
    ViewData["Title"] = "Hồ sơ nhân viên";    // tiêu đề tab trình duyệt

    var avatar = !string.IsNullOrWhiteSpace(Model.AvatarUrl)
        ? Model.AvatarUrl
        : "https://res.cloudinary.com/do48qpmut/image/upload/v1761645429/uploads/tdppvgyas8bhvfs7lton.png";

    string roleText = (Model.RoleID == "AD" ? "Quản trị"
                       : Model.RoleID == "SL" ? "Trưởng ca"
                       : Model.RoleID == "BM" ? "Quản lý chi nhánh"
                       : Model.RoleID == "RM" ? "Quản lý vùng"
                       : Model.RoleID == "MK" ? "Marketing"
                       : "Nhân viên");
}

@section Styles {
    <link rel="stylesheet" href="~/css/employee/profile.css" />
}

<div class="profile-head">
    <div class="avatar"><img src="@avatar" alt="avatar"></div>
    <div>
        <h3 class="name">@Model.FullName</h3>
        <div class="position">@roleText</div>

        <div class="grid-mini">
            <div class="kv"><div class="k">Mã nhân viên</div><div>@Model.EmployeeID</div></div>
            <div class="kv"><div class="k">Chi nhánh</div><div>@(Model.Branch?.Name ?? "N/A")</div></div>
            <div class="kv"><div class="k">Địa chỉ chi nhánh</div><div>@Model.Branch?.Address</div></div>
            <div class="kv"><div class="k">Ngày vào làm</div><div>@Model.HireDate.ToString("yyyy-MM-dd")</div></div>
        </div>
    </div>
</div>

<nav class="tabs">
    <a class="tab" href='@Url.Action("Profile","Employee")'>Thông tin cá nhân</a>
    <a class="tab" href='@Url.Action("Contract","Employee", new { id = Model.EmployeeID })'>Thông tin lao động</a>
    <a class="tab" href='@Url.Action("Chat","Employee", new { id = Model.EmployeeID })'>Đoạn chat chung</a>
    <a class="tab" href='@Url.Action("Salary","Employee", new { id = Model.EmployeeID })'>Thu nhập</a>
</nav>

<div class="section">
    <h3 class="section-title">THÔNG TIN CƠ BẢN</h3>
    <table class="tbl">
        <tr>
            <th>Ngày sinh</th><td>@Model.DateOfBirth?.ToString("yyyy-MM-dd")</td>
            <th>Quốc tịch</th><td>@Model.Nationality</td>
        </tr>
        <tr>
            <th>Giới tính</th><td>@Model.Gender</td>
            <th>Dân tộc</th><td>@Model.Ethnicity</td>
        </tr>
    </table>
</div>

<div class="section">
    <h3 class="section-title">THÔNG TIN LIÊN HỆ</h3>
    <table class="tbl">
        <tr>
            <th>Điện thoại di động</th><td>@Model.PhoneNumber</td>
            <th>SĐT khẩn cấp 1</th><td>@Model.EmergencyPhone1 </td>
        </tr>
        <tr>
            <th>Email cá nhân</th><td>@Model.Email</td>
            <th>SĐT khẩn cấp 2</th><td>@Model.EmergencyPhone2</td>
        </tr>
    </table>
</div>
